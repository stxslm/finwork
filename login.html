<head>
	<meta charset="UTF-8">
	<title>登录</title>
	<link rel="stylesheet" type="text/css" href="css/login.css">
	<script type="text/javascript" src="js/login.js"></script>
	<link rel="shortcut icon" href="sw_eps.ico" type="image/x-icon">

	<style>
		body {
			background: linear-gradient(120deg, #fbeee6 0%, #ffe5e5 100%);
			font-family: 'Segoe UI', '微软雅黑', Arial, sans-serif;
		}

		#loginpage {
			display: flex;
			flex-direction: column;
			/* 新增：让商城名和表单垂直排列 */
			justify-content: center;
			align-items: center;
			height: 100vh;
		}

		#form1 {
			background: #fff;
			border-radius: 18px;
			box-shadow: 0 4px 24px #f3eaea;
			padding: 40px 50px 30px 50px;
			min-width: 420px;
		}

		table {
			width: 100%;
		}

		.td1 {
			padding: 18px 0 10px 0;
			font-size: 18px;
			color: #333;
		}

		.img1 {
			width: 28px;
			vertical-align: middle;
			margin-right: 8px;
		}

		input[type="text"],
		input[type="password"] {
			border: 1px solid #ddd;
			border-radius: 8px;
			padding: 8px 12px;
			font-size: 16px;
			width: 220px;
			margin-left: 8px;
			transition: border 0.2s;
		}

		input[type="text"]:focus,
		input[type="password"]:focus {
			border: 1.5px solid #F33F3F;
			outline: none;
		}

		.captcha-row {
			display: flex;
			align-items: center;
			margin-top: 8px;
		}

		.captcha-img {
			width: 90px;
			height: 36px;
			border-radius: 6px;
			margin-left: 10px;
			cursor: pointer;
			border: 1px solid #eee;
			object-fit: cover;
			background: #f9f9f9;
		}

		.tick {
			background: #F33F3F;
			color: #fff;
			border: none;
			border-radius: 25px;
			font-size: 20px;
			font-weight: bold;
			width: 100%;
			height: 50px;
			margin-top: 18px;
			cursor: pointer;
			transition: background 0.2s;
		}

		.tick:hover {
			background: #d12c2c;
		}

		.register-link {
			text-align: right;
			padding-top: 15px;
			color: #000;
		}

		.register-link a {
			color: #000000;
			text-decoration: none;
			font-size: 16px;
		}

		#togglePwd {
			background: #f5f5f5;
			color: #F33F3F;
			border: 1px solid #F33F3F;
			border-radius: 8px;
			margin-left: 8px;
			padding: 4px 16px;
			font-size: 14px;
			cursor: pointer;
			transition: background 0.2s, color 0.2s, border 0.2s;
		}

		#togglePwd:hover {
			background: #F33F3F;
			color: #fff;
			border: 1px solid #d12c2c;
		}


		.mall-letter {
			display: inline-block;
			transition: transform 0.2s cubic-bezier(.4, 2, .6, 1), color 0.2s;
			cursor: pointer;
		}

		.mall-letter:hover {
			transform: translateY(-8px);
			color: #d12c2c;
		}

		#mall-title {
			font-size: 72px;
			font-weight: bold;
			letter-spacing: 6px;
			color: #F33F3F;
			margin-bottom: 50px;
			text-align: center;
		}

		.register-btn {
			background: #f5f5f5;
			color: #F33F3F;
			border: 1px solid #F33F3F;
			border-radius: 8px;
			margin-left: 8px;
			padding: 4px 16px;
			font-size: 14px;
			cursor: pointer;
			transition: background 0.2s, color 0.2s, border 0.2s;
		}

		.register-btn:hover {
			background: #F33F3F;
			color: #fff;
			border: 1px solid #d12c2c;
		}
	</style>
</head>

<body>

	<div id="loginpage">

		<!-- 商城名独立于表单上方 -->
		<div id="mall-title">
			<span class="mall-letter">S</span>
			<span class="mall-letter">E</span>
			<span class="mall-letter">V</span>
			<span class="mall-letter">E</span>
			<span class="mall-letter">N</span>
			<span class="mall-letter">T</span>
			<span class="mall-letter">E</span>
			<span class="mall-letter">E</span>
			<span class="mall-letter">N</span>
		</div>

		<div id="form1">
			<form action="index.html" method="post" onsubmit="return validate()">
				<table>
					<tr>
						<td class="td1">
							<img class="img1" src="img/2020-06-08_231233.png" alt="">
							账号：
							<input id="t2" name="a" type="text" placeholder="请输入用户名/电话号码" maxlength="11" required>
						</td>
					</tr>
					<tr>
						<td class="td1">
							<img class="img1" src="img/2020-06-08_231330.png" alt="">
							密码：
							<input id="t3" name="b" type="password" maxlength="18" placeholder="请输入密码" required>
							<button type="button" id="togglePwd" style="margin-left:8px;padding:4px 10px;
								font-size:14px;cursor:pointer;">显示</button>
						</td>
					</tr>

					<tr>
						<td class="td1">
							<img class="img1" src="img/2020-06-08_231233.png" alt="">
							验证码：
							<input id="captcha" name="captcha" type="text" maxlength="4" placeholder="请输入验证码" required
								style="width:100px; display:inline-block;
								 vertical-align:middle; margin-left:8px;">
							<img class="captcha-img" id="captchaImg" src="cap/captcha.png" alt="验证码" title="点击刷新"
								onclick="refreshCaptcha()" style="display:inline-block; 
								vertical-align:middle; margin-left:10px;">
						</td>
					</tr>
					<tr>
						<td>
							<input type="submit" value="登录" class="tick">
						</td>
					</tr>


					<tr>
						<td class="register-link" style="padding-top: 10px;">
							还没有账号？
							<button type="button" class="register-btn"
								onclick="window.location.href='register.html'">注册</button>
							&nbsp;|&nbsp;
							<a href="index.html" class="register-btn"
								style="background:#fff;color:#F33F3F;border:1px solid #F33F3F;padding:4px 16px;border-radius:8px;text-decoration:none;transition:background 0.2s, color 0.2s, border 0.2s;">游客访问</a>
						</td>
					</tr>


					<!-- <tr>
						<td class="register-link" style="padding-top: 10px;">
							还没有账号？
							<button type="button" class="register-btn"
								onclick="window.location.href='register.html'">注册</button>
						</td>
					</tr> -->
				</table>
			</form>
		</div>
	</div>




	<script>
		let captchaFlag = false;
		let currentCaptcha = 'uwv6'; // 当前验证码内容

		function refreshCaptcha() {
			const img = document.getElementById('captchaImg');
			captchaFlag = !captchaFlag;
			const file = captchaFlag ? 'cap/captcha1.png' : 'cap/captcha.png';
			img.src = file + '?' + Math.random();
			currentCaptcha = captchaFlag ? '3n3d' : 'uwv6'; // 切换验证码内容
		}



		// 登录页面：校验用户名和密码是否与localStorage中注册信息一致

		function validate() {
			const user = document.getElementById('t2').value.trim();
			const pwd = document.getElementById('t3').value.trim();
			const captcha = document.getElementById('captcha').value.trim().toLowerCase();

			// 验证码校验
			if (captcha !== currentCaptcha) {
				alert('验证码错误，请重新输入');
				return false;
			}

			// 读取已注册用户
			let users = JSON.parse(localStorage.getItem('users') || '[]');
			let found = users.find(u => u.username === user && u.pwd === pwd);
			if (!found) {
				alert('用户名或密码错误，或未注册');
				return false;
			}
			return true;
		}




		document.getElementById('togglePwd').onclick = function () {
			const pwdInput = document.getElementById('t3');
			if (pwdInput.type === 'password') {
				pwdInput.type = 'text';
				this.textContent = '隐藏';
			} else {
				pwdInput.type = 'password';
				this.textContent = '显示';
			}
		};
	</script>
</body>